<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css"/>
    <script data-require="jquery@*" data-semver="3.1.1" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        const api = "http://localhost:8080";
        $(loadReceipts())

        function loadReceipts(){
            $.getJSON(api + "/receipts", function(receipts){
                $("#receiptList").empty();
                for(var i = receipts.length-1; i >= 0 ; i--) {
                    var receipt = receipts[i];
                    $(`<div class="receipt">Time:${receipt.created} Name:${receipt.merchantName} Amount:$${receipt.value} <div><span class="receiptTag">Tags:${receipt.tags}</span></div></div>`)
                        .appendTo($("#receiptList"));
                }
            })
        }

        function addReceipt(){
            $.ajax({
                url:         api+"/receipts",
                type:        "POST",
                data:        JSON.stringify({ merchant: "Cornell Tech", amount: 19.99 }),
                contentType: "application/json; charset=utf-8",
                dataType:    "json"
            });

            loadReceipts();
        }

        function toggleInputBox() {
            if (document.getElementById("inputBox").style.display == 'none') {
                document.getElementById("inputBox").style.display = 'block';
            } else {
                document.getElementById("inputBox").style.display = 'none';
            }
        }
    </script>
</head>

<body>
<DIV id="container">
    <h1>My receipts</h1>
    <div class="button" onclick="toggleInputBox()">+</div>
    <div id = "inputBox">
        <input type="text" id="inputMerchant" placeholder="Merchant">
        <input type="text" id="inputAmount" placeholder="Amount">
        <input type="button" value="Cancel">
        <input type="button" value="Save">
    </div>
    <div id="receiptList">
    </div>
</DIV>
</body>

</html>